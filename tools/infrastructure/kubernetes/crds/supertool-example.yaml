---
apiVersion: devops.supertool.io/v1alpha1
kind: SuperTool
metadata:
  name: supertool-production
  namespace: production
  labels:
    app.kubernetes.io/name: supertool
    app.kubernetes.io/instance: supertool-production
    app.kubernetes.io/version: '1.0.0'
    app.kubernetes.io/component: application
    app.kubernetes.io/part-of: supertool
    app.kubernetes.io/managed-by: supertool-operator
spec:
  # SuperTool version to deploy
  version: '1.0.0'

  # Number of replicas
  replicas: 3

  # Container image configuration
  image:
    repository: ghcr.io/username/supertool
    pullPolicy: IfNotPresent

  # Resource requirements
  resources:
    limits:
      cpu: '2000m'
      memory: '4Gi'
    requests:
      cpu: '500m'
      memory: '1Gi'

  # Autoscaling configuration
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 20
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  # Ingress configuration
  ingress:
    enabled: true
    className: nginx
    host: supertool.example.com
    tls: true
    annotations:
      cert-manager.io/cluster-issuer: 'letsencrypt-prod'
      nginx.ingress.kubernetes.io/rate-limit: '100'
      nginx.ingress.kubernetes.io/ssl-redirect: 'true'

  # Monitoring configuration
  monitoring:
    enabled: true
    prometheus:
      enabled: true
      port: 9090
    grafana:
      enabled: true

  # Security configuration
  security:
    podSecurityStandard: restricted
    networkPolicy:
      enabled: true
    serviceAccount:
      create: true
      name: supertool

  # Persistence configuration
  persistence:
    enabled: true
    storageClass: fast-ssd
    size: 50Gi
    accessModes:
      - ReadWriteOnce

---
apiVersion: devops.supertool.io/v1alpha1
kind: SuperTool
metadata:
  name: supertool-staging
  namespace: staging
  labels:
    app.kubernetes.io/name: supertool
    app.kubernetes.io/instance: supertool-staging
    app.kubernetes.io/version: '1.0.0'
    environment: staging
spec:
  version: '1.0.0'
  replicas: 2

  image:
    repository: ghcr.io/username/supertool
    pullPolicy: Always

  resources:
    limits:
      cpu: '1000m'
      memory: '2Gi'
    requests:
      cpu: '250m'
      memory: '512Mi'

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 75

  ingress:
    enabled: true
    className: nginx
    host: staging-supertool.example.com
    tls: true

  monitoring:
    enabled: true

  security:
    podSecurityStandard: baseline
    networkPolicy:
      enabled: true

  persistence:
    enabled: false

---
apiVersion: devops.supertool.io/v1alpha1
kind: SuperTool
metadata:
  name: supertool-dev
  namespace: dev
  labels:
    app.kubernetes.io/name: supertool
    app.kubernetes.io/instance: supertool-dev
    environment: development
spec:
  version: '1.0.0'
  replicas: 1

  image:
    repository: ghcr.io/username/supertool
    pullPolicy: Always

  resources:
    limits:
      cpu: '500m'
      memory: '1Gi'
    requests:
      cpu: '100m'
      memory: '256Mi'

  autoscaling:
    enabled: false

  ingress:
    enabled: true
    className: nginx
    host: dev-supertool.example.com
    tls: false

  monitoring:
    enabled: false

  security:
    podSecurityStandard: baseline
    networkPolicy:
      enabled: false

  persistence:
    enabled: false
