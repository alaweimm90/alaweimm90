<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Planner Template</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/themes.css">
    <link rel="stylesheet" href="../css/print.css">
    <style>
        @page {
            size: A4;
            margin: 0.5in;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            font-size: 10pt;
            line-height: 1.4;
        }

        .page {
            width: 100%;
            height: 100vh;
            min-height: 800px;
            padding: 20px;
            background-color: white;
            position: relative;
            page-break-after: always;
        }

        .page-header {
            text-align: center;
            margin-bottom: 20px;
            font-size: 16pt;
            font-weight: bold;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .week-header {
            display: grid;
            grid-template-columns: 80px repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
            font-weight: bold;
            text-align: center;
        }

        .day-column {
            border: 1px solid #ddd;
            padding: 5px;
            min-height: 600px;
        }

        .day-header {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .time-slot {
            border-bottom: 1px solid #eee;
            padding: 8px;
            min-height: 40px;
        }

        .page-footer {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            text-align: center;
            font-size: 8pt;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }

        @media print {
            .page {
                height: auto;
                min-height: 100vh;
                page-break-after: always;
            }
        }
    </style>
</head>
<body class="planner-weekly">
    <!-- Page 1 -->
    <div class="page">
        <div class="page-header" id="header-text">Weekly Planner</div>

        <div class="week-header">
            <div>Time</div>
            <div>Monday</div>
            <div>Tuesday</div>
            <div>Wednesday</div>
            <div>Thursday</div>
            <div>Friday</div>
            <div>Saturday</div>
            <div>Sunday</div>
        </div>

        <div style="display: grid; grid-template-columns: 80px repeat(7, 1fr); gap: 5px;">
            <div class="day-column">
                <div class="time-slot">8:00 AM</div>
                <div class="time-slot">9:00 AM</div>
                <div class="time-slot">10:00 AM</div>
                <div class="time-slot">11:00 AM</div>
                <div class="time-slot">12:00 PM</div>
                <div class="time-slot">1:00 PM</div>
                <div class="time-slot">2:00 PM</div>
                <div class="time-slot">3:00 PM</div>
                <div class="time-slot">4:00 PM</div>
                <div class="time-slot">5:00 PM</div>
                <div class="time-slot">6:00 PM</div>
                <div class="time-slot">7:00 PM</div>
                <div class="time-slot">8:00 PM</div>
                <div class="time-slot">9:00 PM</div>
                <div class="time-slot">Notes</div>
            </div>

            <div class="day-column">
                <div class="day-header">Mon</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Tue</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Wed</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Thu</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Fri</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Sat</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>

            <div class="day-column">
                <div class="day-header">Sun</div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
                <div class="time-slot"></div>
            </div>
        </div>

        <div class="page-footer" id="footer-text">Week of January 1, 2024</div>
    </div>

    <!-- Additional pages will be generated by JavaScript -->
    <div id="additional-pages"></div>

    <script>
        // Generate additional pages based on user settings
        const urlParams = new URLSearchParams(window.location.search);
        const pageCount = parseInt(urlParams.get('pages')) || 52; // 52 weeks in a year
        const theme = urlParams.get('theme') || 'minimalist';
        const primaryColor = urlParams.get('primary') || '#2c3e50';
        const secondaryColor = urlParams.get('secondary') || '#3498db';
        const headerText = urlParams.get('header') || 'Weekly Planner';
        const footerText = urlParams.get('footer') || 'Week of {date}';

        document.body.classList.add(`theme-${theme}`);
        document.documentElement.style.setProperty('--primary-color', primaryColor);
        document.documentElement.style.setProperty('--secondary-color', secondaryColor);

        const headerElement = document.getElementById('header-text');
        const footerElement = document.getElementById('footer-text');

        headerElement.textContent = headerText;

        // Calculate the start of the current week
        const now = new Date();
        const startOfWeek = new Date(now);
        startOfWeek.setDate(now.getDate() - now.getDay() + 1);

        const weekStart = startOfWeek.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
        footerElement.textContent = footerText.replace('{date}', weekStart);

        const additionalPagesContainer = document.getElementById('additional-pages');

        for (let i = 2; i <= pageCount; i++) {
            const weekStartDate = new Date(startOfWeek);
            weekStartDate.setDate(startOfWeek.getDate() + (i - 1) * 7);

            const weekEndDate = new Date(weekStartDate);
            weekEndDate.setDate(weekStartDate.getDate() + 6);

            const weekRange = `${weekStartDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric' })} - ${weekEndDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`;

            const pageDiv = document.createElement('div');
            pageDiv.className = 'page';
            pageDiv.innerHTML = `
                <div class="page-header">${headerText}</div>
                <div class="week-header">
                    <div>Time</div>
                    <div>Monday</div>
                    <div>Tuesday</div>
                    <div>Wednesday</div>
                    <div>Thursday</div>
                    <div>Friday</div>
                    <div>Saturday</div>
                    <div>Sunday</div>
                </div>
                <div style="display: grid; grid-template-columns: 80px repeat(7, 1fr); gap: 5px;">
                    <div class="day-column">
                        <div class="time-slot">8:00 AM</div>
                        <div class="time-slot">9:00 AM</div>
                        <div class="time-slot">10:00 AM</div>
                        <div class="time-slot">11:00 AM</div>
                        <div class="time-slot">12:00 PM</div>
                        <div class="time-slot">1:00 PM</div>
                        <div class="time-slot">2:00 PM</div>
                        <div class="time-slot">3:00 PM</div>
                        <div class="time-slot">4:00 PM</div>
                        <div class="time-slot">5:00 PM</div>
                        <div class="time-slot">6:00 PM</div>
                        <div class="time-slot">7:00 PM</div>
                        <div class="time-slot">8:00 PM</div>
                        <div class="time-slot">9:00 PM</div>
                        <div class="time-slot">Notes</div>
                    </div>
                    ${Array.from({length: 7}, (_, idx) => `
                        <div class="day-column">
                            <div class="day-header">${['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][idx]}</div>
                            ${Array.from({length: 15}, () => '<div class="time-slot"></div>').join('')}
                        </div>
                    `).join('')}
                </div>
                <div class="page-footer">${footerText.replace('{date}', weekRange)}</div>
            `;
            additionalPagesContainer.appendChild(pageDiv);
        }
    </script>
</body>
</html>