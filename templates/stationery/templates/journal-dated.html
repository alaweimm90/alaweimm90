<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dated Journal Template</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/themes.css">
    <link rel="stylesheet" href="../css/print.css">
    <style>
        @page {
            size: A4;
            margin: 1in;
        }

        body {
            font-family: 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.5;
        }

        .page {
            width: 100%;
            height: 100vh;
            min-height: 800px;
            padding: 40px;
            background-image: linear-gradient(to bottom, transparent 29px, #ddd 29px, #ddd 30px, transparent 30px);
            background-size: 100% 30px;
            background-attachment: local;
            position: relative;
            page-break-after: always;
        }

        .page-header {
            text-align: center;
            margin-bottom: 20px;
            font-size: 14pt;
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }

        .date-section {
            text-align: center;
            margin-bottom: 20px;
            font-size: 16pt;
            font-weight: bold;
            color: var(--primary-color);
        }

        .page-footer {
            position: absolute;
            bottom: 40px;
            left: 40px;
            right: 40px;
            text-align: center;
            font-size: 10pt;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }

        .content-area {
            height: calc(100% - 160px);
            padding: 20px 0;
        }

        .margin-line {
            position: absolute;
            left: 80px;
            top: 0;
            bottom: 0;
            width: 1px;
            background-color: #ccc;
        }

        @media print {
            .page {
                height: auto;
                min-height: 100vh;
                page-break-after: always;
            }
        }
    </style>
</head>
<body class="journal-dated">
    <!-- Page 1 -->
    <div class="page">
        <div class="margin-line"></div>
        <div class="page-header" id="header-text">Personal Journal</div>
        <div class="date-section" id="date-text">Monday, January 1, 2024</div>
        <div class="content-area">
            <!-- Content will be filled by JavaScript -->
        </div>
        <div class="page-footer" id="footer-text">Page 1</div>
    </div>

    <!-- Additional pages will be generated by JavaScript -->
    <div id="additional-pages"></div>

    <script>
        // Generate additional pages based on user settings
        const urlParams = new URLSearchParams(window.location.search);
        const pageCount = parseInt(urlParams.get('pages')) || 100;
        const theme = urlParams.get('theme') || 'minimalist';
        const primaryColor = urlParams.get('primary') || '#2c3e50';
        const secondaryColor = urlParams.get('secondary') || '#3498db';
        const headerText = urlParams.get('header') || 'Personal Journal';
        const footerText = urlParams.get('footer') || 'Page {page}';

        document.body.classList.add(`theme-${theme}`);
        document.documentElement.style.setProperty('--primary-color', primaryColor);
        document.documentElement.style.setProperty('--secondary-color', secondaryColor);

        const headerElement = document.getElementById('header-text');
        const dateElement = document.getElementById('date-text');
        const footerElement = document.getElementById('footer-text');

        headerElement.textContent = headerText;
        footerElement.textContent = footerText.replace('{page}', '1');

        // Generate dates for the year
        const startDate = new Date();
        startDate.setDate(startDate.getDate() - startDate.getDay() + 1); // Start from Monday

        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateElement.textContent = startDate.toLocaleDateString('en-US', options);

        const additionalPagesContainer = document.getElementById('additional-pages');

        for (let i = 2; i <= pageCount; i++) {
            const currentDate = new Date(startDate);
            currentDate.setDate(startDate.getDate() + Math.floor((i - 1) / 2)); // 2 pages per day

            const pageDiv = document.createElement('div');
            pageDiv.className = 'page';
            pageDiv.innerHTML = `
                <div class="margin-line"></div>
                <div class="page-header">${headerText}</div>
                <div class="date-section">${currentDate.toLocaleDateString('en-US', options)}</div>
                <div class="content-area"></div>
                <div class="page-footer">${footerText.replace('{page}', i)}</div>
            `;
            additionalPagesContainer.appendChild(pageDiv);
        }
    </script>
</body>
</html>