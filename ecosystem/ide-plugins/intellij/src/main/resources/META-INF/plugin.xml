<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.atlas.intellij</id>
    <name>ATLAS IntelliJ Plugin</name>
    <version>1.0.0</version>
    <vendor email="support@atlas-platform.com" url="https://atlas-platform.com">ATLAS Platform</vendor>

    <description><![CDATA[
        ATLAS IntelliJ Plugin for AI-powered code analysis, refactoring automation, and intelligent code assistance.
        Integrates seamlessly with the ATLAS multiagent LLM orchestration platform.
    ]]></description>

    <change-notes><![CDATA[
        Initial release with code inspection integration and refactoring automation.
    ]]></change-notes>

    <idea-version since-build="213.0"/>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.atlas.intellij.services.AtlasService"/>
        <applicationConfigurable
            parentId="tools"
            instance="com.atlas.intellij.settings.AtlasSettingsConfigurable"
            id="atlas.settings"
            displayName="ATLAS"/>
        <localInspection
            language="JAVA"
            shortName="AtlasCodeInspection"
            displayName="ATLAS Code Analysis"
            groupName="ATLAS"
            enabledByDefault="true"
            level="WARNING"
            implementationClass="com.atlas.intellij.inspections.AtlasCodeInspection"/>
        <intentionAction>
            <className>com.atlas.intellij.intentions.AtlasRefactorIntention</className>
            <category>ATLAS</category>
            <descriptionDirectoryName>AtlasRefactor</descriptionDirectoryName>
        </intentionAction>
        <toolWindow
            id="ATLAS"
            anchor="right"
            icon="/icons/atlas.svg"
            factoryClass="com.atlas.intellij.toolwindow.AtlasToolWindowFactory"/>
    </extensions>

    <actions>
        <group id="AtlasMenu" text="ATLAS" description="ATLAS AI Assistant Actions">
            <add-to-group group-id="MainMenu" anchor="last"/>
            <action id="Atlas.AnalyzeCode" class="com.atlas.intellij.actions.AnalyzeCodeAction"
                    text="Analyze Code" description="Analyze selected code with ATLAS"/>
            <action id="Atlas.GenerateCode" class="com.atlas.intellij.actions.GenerateCodeAction"
                    text="Generate Code" description="Generate code with ATLAS assistance"/>
            <action id="Atlas.ReviewCode" class="com.atlas.intellij.actions.ReviewCodeAction"
                    text="Review Code" description="Review code for issues and improvements"/>
            <action id="Atlas.RefactorCode" class="com.atlas.intellij.actions.RefactorCodeAction"
                    text="Refactor Code" description="Apply ATLAS-powered refactoring"/>
            <separator/>
            <action id="Atlas.ShowDashboard" class="com.atlas.intellij.actions.ShowDashboardAction"
                    text="Show Dashboard" description="Open ATLAS dashboard"/>
            <action id="Atlas.ConfigureApiKey" class="com.atlas.intellij.actions.ConfigureApiKeyAction"
                    text="Configure API Key" description="Configure ATLAS API key"/>
        </group>

        <group id="AtlasEditorPopupMenu">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <reference ref="Atlas.AnalyzeCode"/>
            <reference ref="Atlas.GenerateCode"/>
            <reference ref="Atlas.ReviewCode"/>
            <reference ref="Atlas.RefactorCode"/>
        </group>
    </actions>

    <project-components>
        <component>
            <implementation-class>com.atlas.intellij.components.AtlasProjectComponent</implementation-class>
        </component>
    </project-components>
</idea-plugin>