name: MCPS Quarterly Review

on:
  schedule:
    - cron: '0 8 1 */3 *'
  workflow_dispatch:

jobs:
  remind:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Open update issue
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const mdPath = 'docs/cloud/mcps.md';
            const jsonPath = 'docs/cloud/mcps.json';
            const hasMd = fs.existsSync(mdPath);
            const hasJson = fs.existsSync(jsonPath);
            const body = `Quarterly MCPS review\n\n- Document: ${hasMd ? mdPath : 'missing'}\n- Catalog: ${hasJson ? jsonPath : 'missing'}\n\nPlease refresh provider profiles, pricing links, SLAs, compliance, and matrix; update version header and changelog.`;
            await github.rest.issues.create({ owner: context.repo.owner, repo: context.repo.repo, title: 'MCPS: Quarterly Update Reminder', labels: ['mcps','docs-review'], body });
