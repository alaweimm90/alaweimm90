version: 2
updates:
  # NPM dependency updates
  - package-ecosystem: 'npm'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'monday'
      time: '03:00'
    open-pull-requests-limit: 10
    reviewers:
      - 'meshal@berkeley.edu'
    assignees:
      - 'alaweimm90'
    labels:
      - 'dependencies'
      - 'npm'
    commit-message:
      prefix: 'chore(deps): '
      include: 'scope'
    pull-request-branch-name:
      separator: '/'
    allow:
      - dependency-type: 'all'
    ignore:
      # Ignore packages that require major version bumps requiring manual review
      - dependency-name: 'typescript'
        update-types: ['version-update:semver-major']
    rebase-strategy: 'auto'
    automerge-type: 'squash'
    # Don't auto-merge major versions - require manual review
    # automerge-type is not set for major updates
    versioning-strategy: 'auto'

  # NPM security patches (higher priority)
  - package-ecosystem: 'npm'
    directory: '/'
    schedule:
      interval: 'daily'
      time: '02:00'
    open-pull-requests-limit: 5
    security-updates-only: true
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'security'
      - 'npm'
    commit-message:
      prefix: 'security: '
    pull-request-branch-name:
      separator: '/'
    automerge-type: 'squash'
    allow:
      - dependency-type: 'direct'

  # NPM updates for metaHub packages
  - package-ecosystem: 'npm'
    directory: '/metaHub/trae-core'
    schedule:
      interval: 'weekly'
      day: 'tuesday'
      time: '03:00'
    open-pull-requests-limit: 5
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'trae-core'

  # NPM updates for marketing automation
  - package-ecosystem: 'npm'
    directory: '/organizations/alaweimm90-business/marketing-automation'
    schedule:
      interval: 'weekly'
      day: 'wednesday'
      time: '03:00'
    open-pull-requests-limit: 5
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'marketing-automation'

  # Python dependency updates
  - package-ecosystem: 'pip'
    directory: '/organizations/alaweimm90-science/mag-logic'
    schedule:
      interval: 'weekly'
      day: 'monday'
      time: '04:00'
    open-pull-requests-limit: 10
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'python'
      - 'mag-logic'
    commit-message:
      prefix: 'chore(deps): '
    allow:
      - dependency-type: 'all'
    automerge-type: 'squash'

  # Python security patches (mag-logic)
  - package-ecosystem: 'pip'
    directory: '/organizations/alaweimm90-science/mag-logic'
    schedule:
      interval: 'daily'
      time: '02:30'
    open-pull-requests-limit: 5
    security-updates-only: true
    labels:
      - 'security'
      - 'python'
    automerge-type: 'squash'
    allow:
      - dependency-type: 'direct'

  # Python dependency updates (qube-ml)
  - package-ecosystem: 'pip'
    directory: '/organizations/alaweimm90-science/qube-ml'
    schedule:
      interval: 'weekly'
      day: 'monday'
      time: '04:15'
    open-pull-requests-limit: 10
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'python'
      - 'qube-ml'

  # Python dependency updates (sci-comp)
  - package-ecosystem: 'pip'
    directory: '/organizations/alaweimm90-science/sci-comp'
    schedule:
      interval: 'weekly'
      day: 'monday'
      time: '04:30'
    open-pull-requests-limit: 10
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'python'
      - 'sci-comp'

  # GitHub Actions updates
  - package-ecosystem: 'github-actions'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'friday'
      time: '10:00'
    open-pull-requests-limit: 5
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'github-actions'
    commit-message:
      prefix: 'ci: '
    automerge-type: 'squash'

  # Docker dependency updates
  - package-ecosystem: 'docker'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'thursday'
      time: '03:00'
    open-pull-requests-limit: 5
    reviewers:
      - 'meshal@berkeley.edu'
    labels:
      - 'dependencies'
      - 'docker'
    commit-message:
      prefix: 'build(docker): '

# Vulnerability alerts settings
vulnerability-alerts: true
# Branch protection settings recommended:
# - Require pull request reviews before merging (at least 1)
# - Require status checks to pass before merging
# - Require branches to be up to date before merging
# - Include administrators in restrictions
