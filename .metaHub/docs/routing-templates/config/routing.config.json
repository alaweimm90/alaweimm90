{
  "_metadata": {
    "version": "1.0.0",
    "description": "TRAE Three-Tier LLM Routing Configuration Template",
    "target": "7-10x cost reduction with quality maintenance",
    "lastUpdated": "2025-11-22",
    "frameworkAgnostic": true,
    "complianceReady": ["HIPAA", "GDPR", "SOC2", "PCI_DSS"]
  },

  "costOptimizationMode": "balanced",

  "geographicFallbacks": [
    {
      "primary": "north_america",
      "fallbacks": ["europe", "asia_pacific"],
      "latencyThreshold": 1000,
      "costMultiplier": 1.5,
      "compliancePriority": true
    },
    {
      "primary": "europe",
      "fallbacks": ["north_america", "asia_pacific"],
      "latencyThreshold": 1000,
      "costMultiplier": 1.5,
      "compliancePriority": true
    },
    {
      "primary": "asia_pacific",
      "fallbacks": ["north_america", "europe"],
      "latencyThreshold": 1000,
      "costMultiplier": 1.5,
      "compliancePriority": true
    },
    {
      "primary": "south_america",
      "fallbacks": ["north_america", "europe"],
      "latencyThreshold": 1200,
      "costMultiplier": 1.8,
      "compliancePriority": false
    },
    {
      "primary": "africa",
      "fallbacks": ["europe", "asia_pacific"],
      "latencyThreshold": 1500,
      "costMultiplier": 2.0,
      "compliancePriority": false
    }
  ],

  "costBudget": {
    "dailyLimit": 100.0,
    "monthlyLimit": 3000.0,
    "perRequestLimit": 10.0,
    "currentDailyUsage": 0.0,
    "currentMonthlyUsage": 0.0,
    "alertThreshold": 0.8,
    "complianceBudget": 500.0,
    "emergencyThreshold": 0.95,
    "resetSchedule": "daily"
  },

  "emergencyControls": [
    {
      "enabled": true,
      "trigger": "cost_spike",
      "triggerCondition": {
        "threshold": 2.0,
        "timeWindow": 300
      },
      "action": "force_tier_3",
      "cooldownPeriod": 30,
      "notificationChannels": ["console", "metrics", "alerts"],
      "complianceOverride": false
    },
    {
      "enabled": true,
      "trigger": "high_error_rate",
      "triggerCondition": {
        "threshold": 0.1,
        "timeWindow": 600
      },
      "action": "geographic_restriction",
      "cooldownPeriod": 15,
      "notificationChannels": ["console", "alerts"],
      "complianceOverride": false
    },
    {
      "enabled": true,
      "trigger": "latency_spike",
      "triggerCondition": {
        "threshold": 5000,
        "timeWindow": 300
      },
      "action": "rate_limiting",
      "cooldownPeriod": 10,
      "notificationChannels": ["console", "metrics"],
      "complianceOverride": false
    },
    {
      "enabled": true,
      "trigger": "service_degradation",
      "triggerCondition": {
        "threshold": 0.8,
        "timeWindow": 900
      },
      "action": "disable_non_critical",
      "cooldownPeriod": 20,
      "notificationChannels": ["console", "alerts", "performance"],
      "complianceOverride": false
    },
    {
      "enabled": true,
      "trigger": "compliance_violation",
      "triggerCondition": {
        "severity": "high",
        "timeWindow": 60
      },
      "action": "compliance_lockdown",
      "cooldownPeriod": 5,
      "notificationChannels": ["console", "security", "compliance"],
      "complianceOverride": true
    }
  ],

  "cacheEnabled": true,
  "cacheTTL": 3600,
  "cacheStrategy": "lru",
  "cacheMaxSize": 1000,

  "monitoringEnabled": true,
  "analyticsEnabled": true,
  "metricsCollection": {
    "interval": 60,
    "retention": "30d",
    "aggregation": ["1m", "5m", "1h", "1d"]
  },

  "maxRetries": 3,
  "timeout": 30000,
  "retryStrategy": "exponential_backoff",

  "compliance": {
    "enabledFrameworks": ["GDPR", "HIPAA", "SOC2"],
    "strictMode": false,
    "auditLevel": "detailed",
    "dataHandling": {
      "encryptionRequired": true,
      "anonymizationRequired": false,
      "retentionLimits": {
        "public": 365,
        "internal": 2555,
        "confidential": 2555,
        "restricted": 2555
      },
      "crossBorderTransferAllowed": true,
      "dataLocalizationRequired": false
    },
    "geographicCompliance": {
      "restrictedRegions": [],
      "dataLocalizationRequired": false,
      "sovereigntyRequirements": {
        "europe": ["GDPR"],
        "north_america": ["HIPAA"],
        "asia_pacific": ["PDPA"]
      }
    },
    "auditSettings": {
      "logRetention": 2555,
      "realTimeMonitoring": true,
      "alertOnViolation": true,
      "complianceReporting": true
    }
  },

  "performance": {
    "targetLatency": 2000,
    "maxConcurrentRequests": 100,
    "rateLimiting": {
      "enabled": true,
      "requestsPerMinute": 60,
      "burstLimit": 10
    },
    "circuitBreaker": {
      "enabled": true,
      "failureThreshold": 0.5,
      "recoveryTimeout": 60,
      "monitoringWindow": 300
    }
  },

  "routingRules": {
    "complexityBasedRouting": true,
    "costBasedOptimization": true,
    "complianceFirstRouting": true,
    "geographicOptimization": true,
    "timeBasedRouting": false,
    "loadBalancing": true
  },

  "modelPreferences": {
    "preferredProviders": ["openai", "anthropic", "gemini"],
    "excludedProviders": [],
    "tierDistribution": {
      "tier_1": 0.15,
      "tier_2": 0.5,
      "tier_3": 0.35
    },
    "regionalPreferences": {
      "prioritizeLocalRegion": true,
      "maxCrossRegionLatency": 1000
    }
  },

  "notificationSettings": {
    "channels": {
      "console": {
        "enabled": true,
        "level": "info"
      },
      "metrics": {
        "enabled": true,
        "endpoint": "metrics.example.com",
        "interval": 60
      },
      "alerts": {
        "enabled": true,
        "webhook": "alerts.example.com/webhook",
        "channels": ["slack", "email"]
      },
      "compliance": {
        "enabled": true,
        "endpoint": "compliance.example.com/report",
        "realTime": true
      }
    },
    "alerts": {
      "costThresholdExceeded": {
        "enabled": true,
        "thresholds": [0.8, 0.9, 0.95],
        "channels": ["console", "alerts"]
      },
      "performanceDegraded": {
        "enabled": true,
        "latencyThreshold": 5000,
        "errorRateThreshold": 0.05,
        "channels": ["console", "metrics"]
      },
      "complianceViolation": {
        "enabled": true,
        "channels": ["console", "compliance", "alerts"]
      }
    }
  },

  "experimental": {
    "predictiveRouting": false,
    "aiPoweredOptimization": false,
    "realTimeModelUpdates": false,
    "advancedAnalytics": false
  },

  "_comments": {
    "costOptimizationMode": "Options: aggressive, balanced, quality_first",
    "geographicFallbacks": "Define fallback chains for geographic redundancy",
    "emergencyControls": "Automatic responses to system conditions",
    "compliance": "GDPR, HIPAA, SOC2, PCI_DSS compliance settings",
    "performance": "System performance and reliability settings",
    "routingRules": "Enable/disable specific routing behaviors",
    "modelPreferences": "Control which models and providers to use",
    "notificationSettings": "Configure monitoring and alerting",
    "experimental": "Beta features (use with caution)"
  }
}
